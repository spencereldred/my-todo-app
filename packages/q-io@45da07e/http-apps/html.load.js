montageDefine("45da07e","http-apps/html",{dependencies:["q"],factory:function(e,t){function n(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var i=e("q");t.HandleHtmlFragmentResponses=function(e,n){return n=n||t.handleHtmlFragmentResponse,function(t){return t.handleHtmlFragmentResponse=n,i.fcall(e,t).then(function(e){return e.htmlFragment?i.fcall(n,e):e})}},t.handleHtmlFragmentResponse=function(e){var t=e.htmlFragment;return delete e.htmlFragment,e.headers["content-type"]="text/html; charset=utf-8",e.body={forEach:function(i){i("<!doctype html>\n"),i("<html>\n"),i("    <head>\n"),void 0!==e.htmlTitle&&i("        <title>"+n(e.htmlTitle)+"</title>\n"),i("    </head>\n"),i("    <body>\n"),t.forEach(function(e){i("        "+e)}),i("    </body>\n"),i("</html>\n")}},e},t.escapeHtml=n}});